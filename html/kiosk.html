<!--
  kiosk.html
  GJ_StampTour

  Created by Js Na on 2025/12/19.
  Copyright © 2025 Js Na. All rights reserved.
-->
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>키오스크 | 스탬프투어</title>
    <style>
        @import url('/css/font.css');
        @import url('/css/root.css');

        :root {
            --screenSaverBackground: #001b4d;
            --screenSaverBlobColor: #4e7cf1;
            --screenSaverBlur: 100px;
            --screenSaverBaseOpacity: 0.5;
            --screenSaverSpeed: 1;
        }

        button {
            margin: 0.2em;
            padding: 0.5em 1em;
            border: none;
            border-radius: 4px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }

        .MainContainer {
            width: 100%;
            height: 100%;
            padding: 4em 0 8em 0;
            box-sizing: border-box;
        }

        .Scanner {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;

            justify-content: center;
            align-items: center;
        }

        .Scanner img {
            position: absolute;
            width: 100%;
            max-height: 30rem;
            object-fit: contain;
            transform: scale(0.9);
            filter: grayscale(100%);
        }

        #ScannerImage.success {
            filter: grayscale(0%);
        }

        #ScannerImage.already {
            filter: hue-rotate(-180deg) saturate(120%) brightness(150%);
        }

        #ScannerImage.fail {
            filter: hue-rotate(135deg) saturate(130%) brightness(80%);
        }

        .MainContainer #reader {
            position: absolute;
            width: 100%;
            max-height: 90%;
            transform: scale(1.2);
        }

        #reader video {
            display: block !important;
        }

        #ScanResultContainer {
            position: fixed;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 8em;
            background-color: var(--SecondaryBackground);
            color: var(--PrimaryText);
            z-index: 999;
            font-size: 1.2rem;
        }

        #ScanResultContainer * {
            margin: 0;
        }

        #OTPManualInputView {
            display: flex;
            align-items: center;
            margin-top: 1em;
        }
        #OTPManualInputView input {
            width: 4em;
            text-align: center;
            margin: 0 0.5em;
            padding: 0.2em;
            font-size: 1.5rem;
            font-weight: 700;
            border: none;
            border-radius: 4px;
            background-color: var(--PrimaryBackground);
            color: var(--PrimaryText);
        }
        #OTPManualInputView button {
            padding: 0.2em 0.8em;
            font-size: 1.5rem;
        }
        
        .successAlert {
            position: fixed;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #f2f2f7;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 56789;
            display: none;
        }

        #successVideo {
            width: 100%;
            max-height: 50%;
        }
        /* 작업용 카메라 블러 */
        /* #reader video {
            filter: blur(20px);
        } */

        #ControlPanel {
            position: fixed;
            top: 4em;
            right: 1em;
            background-color: #00000033;
            color: #fff;
            backdrop-filter: blur(10px);
            padding: 1em;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        #ControlPanel p {
            margin-bottom: 0;
            font-size: 1.2rem;
            font-weight: 700;
        }

        #ScreenSaver {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            overflow: hidden;
        }
        #ScreenSaver #StartGuide {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
        }
        #ScreenSaver #StartGuide * {
            margin: 0;
            padding: 0;
        }

        #ScreenSaver .background {
            position: absolute;
            z-index: -1;
            inset: 0;
            overflow: hidden;
            filter: contrast(110%);
        }

        .blob {
            width: 60vw;
            height: 60vw;
            position: absolute;
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            filter: blur(var(--screenSaverBlur));
            opacity: var(--screenSaverBaseOpacity);
            mix-blend-mode: screen;
            will-change: transform;
        }

        .blob.blue1 {
            background: var(--screenSaverBlobColor);
            top: -15%;
            left: -10%;
            animation: move1 calc(23s * var(--screenSaverSpeed)) infinite alternate;
        }

        .blob.blue2 {
            background: var(--screenSaverBlobColor);
            top: 10%;
            right: -20%;
            animation: move2 calc(19s * var(--screenSaverSpeed)) infinite alternate-reverse;
        }

        .blob.blue3 {
            background: var(--screenSaverBlobColor);
            bottom: -15%;
            left: -15%;
            animation: move3 calc(31s * var(--screenSaverSpeed)) infinite alternate;
        }

        .blob.blue4 {
            background:var(--screenSaverBlobColor);
            top: 35%;
            right: 35%;
            animation: move4 calc(17s * var(--screenSaverSpeed)) infinite alternate-reverse;
        }

        #StartGuide #ScreenSaverLogo {
            width: 100%;
            max-height: 4rem;
            object-fit: contain;
            filter: grayscale(1) brightness(2);
        }
        #StartGuide .StampName {
            font-size: 4rem;
            font-weight: 700;
        }
        #StartGuide .StampLocation {
            font-size: 3rem;
            font-weight: 300;
        }

        #StartGuide .TapToStart {
            font-size: 2.5rem;
            font-weight: 500;
            animation: tapToStartAnimation 2s infinite;
        }

        @keyframes move1 {
            0% {
                transform: translate(0, 0) rotate(0deg) scale(1);
            }

            50% {
                transform: translate(15vw, 15vh) rotate(60deg) scale(1.1);
            }

            100% {
                transform: translate(30vw, -5vh) rotate(120deg) scale(1);
            }
        }

        @keyframes move2 {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }

            50% {
                transform: translate(-25vw, 20vh) rotate(-40deg) scale(1.2);
            }

            100% {
                transform: translate(-10vw, 40vh) rotate(20deg);
            }
        }

        @keyframes move3 {
            0% {
                transform: translate(0, 0) scale(1);
            }

            50% {
                transform: translate(25vw, -30vh) scale(1.3) rotate(-20deg);
            }

            100% {
                transform: translate(-5vw, -15vh) scale(0.9) rotate(10deg);
            }
        }

        @keyframes move4 {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }

            50% {
                transform: translate(-35vw, 15vh) rotate(100deg);
                border-radius: 50% 50% 20% 80%;
            }

            100% {
                transform: translate(10vw, -25vh) rotate(200deg);
            }
        }

        @keyframes tapToStartAnimation {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
            100% {
                opacity: 1;
            }
        }

        

    </style>
</head>

<body>
    <div id="titleBar" class="titleBar">
        <img class="titleLogo" src="/images/StampTourLogo.png" alt="스탬프투어">
        <h2 id="titleLabel">코드 스캔</h2>
    </div>
    <div class="MainContainer">
        <div class="Scanner">
            <div id="reader" autoplay muted playsinline></div>
            <img id="ScannerImage" src="/images/Scanner_scanning.png">
        </div>
    </div>
    <div id="ScanResultContainer">
        <h3 id="ScanResult">환영합니다.</h3>
        <span id="OTPManualInputView">
            <p>수동 입력</p>
            <input type="text" id="Control-scanData" inputmode="numeric" pattern="\d*" placeholder="123456" maxlength="6">
            <button id="Control-SetScanData">확인</button>
        </span>
    </div>
    <div id="ControlPanel">
        <p>스탬프 선택</p>
        <select id="Control-stampSelector">
            <option value="" disabled>스탬프 선택</option>
        </select>
        <p>카메라 선택</p>
        <select id="Control-cameraSelector">
            <option value="" disabled selected>카메라 선택</option>
        </select>
        <button id="Control-StartScanner">스캐너 활성화</button>
        <br>
        <p>제어판</p>
        <button id="Control-TriggerScreenSaver">화면 보호기</button>
        <button id="Control-Fullscreen">전체 화면</button>
        <span style="display: none;">
            <p>동작 제어</p>
            <input type="checkbox" id="Control-MuteToggle" checked>무음 모드</input>
            <button id="Control-TriggerScreenSaver">화면 보호기</button>
            <br>
            <p>피드백 테스트</p>
            <button id="Control-ScanSuccess">인증 성공</button>
            <button id="Control-ScanAlready">이미 인증됨</button>
            <button id="Control-ScanFail">인증 실패</button>
        </span>
    </div>
    <div id="ScreenSaver">
        <div class="background">
            <div class="blob blue1"></div>
            <div class="blob blue2"></div>
            <div class="blob blue3"></div>
            <div class="blob blue4"></div>
        </div>
        <div id="StartGuide">
            <img id="ScreenSaverLogo" src="/images/StampTourLogo.png" alt="스탬프투어">
            <span>
                <h3 class="StampLocation">정보 없음</h3>
                <h1 class="StampName">정보 없음</h1>
            </span>
            <h2 class="TapToStart">아무 곳이나 탭하여 방문 인증</h2>
        </div>
    </div>
    
</body>
<script src="/scripts/html5-qrcode.min.js"></script>
<script src="/scripts/kiosk.js"></script>

</html>