<!--
  CafeIntro.html
  GJ_StampTour

  Created by Js Na on 2024/12/16.
  Copyright Â© 2024 Js Na, All rights reserved.
-->
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- theme color -->
    <meta name="theme-color" content="#0037AA">
    <title>Code Brew | í”„ë¡œê·¸ë˜ë° ë™ì•„ë¦¬ í†µí•© ë¶€ìŠ¤</title>
    <style>
        @import url('/css/root.css');
        @import url('/css/font.css');
        @import url('/css/cafe.css');
    </style>
</head>

<body>
    <div id="MainTitleBar" class="titleBar">
        <img class="titleLogo" src="../images/CodeBrewLogo.png" alt="Code Brew">
    </div>
    <div id="MainJs">
        <div id="HelloContainer">
            <div id="HelloText1" class="MainWelcomeMessage" style="z-index: 5;">
                <h1>ì•ˆë…•í•˜ì„¸ìš”.</h1>
            </div>
            <div id="HelloText2" class="MainWelcomeMessage" style="z-index: 5;">
                <h1>ì¹´í˜ ì£¼ë¬¸ì„ ë„ì™€ë“œë¦´ê²Œìš”.</h1>
            </div>
        </div>
        <div id="LinkContainer">
            <a id="A1" href="./CafeMenu.html?Q=1" class="HelloLink">
                ì‹œì‘í•˜ê¸°
            </a>
        </div>
    </div>
    <script src="/scripts/root.js"></script>
    <script>
        // check if decodeURIComponent(getCookie("user_name")) is not null
        // if not null, show the user name
        // if null, redirect to index page
        let userName = decodeURIComponent(getCookie("user_name"));
        let CafeTable = decodeURIComponent(getCookie("CafeTable"));
        let MenuQuestion = getParameter("Q");
        let AddAnswer = getParameter("A");
        if (AddAnswer) {
            // getCookie("CafeAnswer")ì— AddAnswerë¥¼ ì¶”ê°€í•´ì„œ setCookie
            let CafeAnswer = decodeURIComponent(getCookie("CafeAnswer"));
            if (CafeAnswer == "null") {
                CafeAnswer = AddAnswer;
            } else {
                CafeAnswer = `${CafeAnswer},${AddAnswer}`;
            }
            setCookie("CafeAnswer", CafeAnswer, 7);
        }
        if (userName == "null") {
            window.location.href = "/";
        } else {
            userName = userName.substring(5);
            eById('HelloText1').innerHTML = `<h1>${userName}ë‹˜,</h1>${document.getElementById('HelloText1').innerHTML}<p>[${CafeTable}]</p>`;
            eById('HelloText2').innerHTML = `<p>${userName}ë‹˜, ì•ˆë…•í•˜ì„¸ìš”.</p>${document.getElementById('HelloText2').innerHTML}`;
            eById('A1').innerHTML = `[${CafeTable}] ì£¼ë¬¸í•˜ê¸°`;
        }
        switch (MenuQuestion) {
            case "1":
                deleteCookie("CafeAnswer");
                eById('HelloText1').innerHTML = '<p>ê°„ë‹¨í•œ ì§ˆë¬¸ë¶€í„° ì‹œì‘í•´ ë³¼ê²Œìš”.</p><h1>' + userName + 'ë‹˜ì˜ ì·¨í–¥ì„ ì•Œë ¤ì£¼ì„¸ìš”.</h1>';
                eById('HelloText2').innerHTML = '<p>' + userName + 'ë‹˜ì˜ ì·¨í–¥ì„ ì•Œë ¤ì£¼ì„¸ìš”.</p><h1>ì–´ë–¤ ë§›ì„ ì¢‹ì•„í•˜ì‹œë‚˜ìš”?</h1>';
                eById("LinkContainer").innerHTML = '<a id="A1" href="./CafeMenu.html?Q=2&A=Q1:A1" class="HelloLink">ğŸ‹ ìƒí¼í•œ ë§›</a><a id="A2" href="./CafeMenu.html?Q=2&A=Q1:A3" class="HelloLink">ğŸ« ë‹¬ì½¤í•œ ë§›</a><a id="A3" href="./CafeMenu.html?Q=2&A=Q1:A5" class="HelloLink">ğŸ¥œ ê³ ì†Œí•œ ë§›</a>';
                break;
            case "2":
                eById('HelloText1').innerHTML = '<p>ì˜ ì•Œê² ì–´ìš”.</p><h1>ë‹¤ìŒ ì§ˆë¬¸ì…ë‹ˆë‹¤.</h1>';
                eById('HelloText2').innerHTML = '<p>ë‹¤ìŒ ì§ˆë¬¸ì…ë‹ˆë‹¤.</p><h1>ì‹œì›í•œ ìŒë£ŒëŠ” ì–´ë– ì„¸ìš”?</h1>';
                eById("LinkContainer").innerHTML = '<a id="A1" href="./CafeMenu.html?Q=3&A=Q2:A0" class="HelloLink">â„ï¸ ì°¨ê°€ìš´ ê²ƒì„ ì›í•´ìš”.</a><a id="A3" href="./CafeMenu.html?Q=3&A=Q2:A5" class="HelloLink">â˜• ë”°ëœ»í•œ ìŒë£Œë¥¼ ì›í•´ìš”.</a>';
                break;
            case "3":
                eById("HelloText1").innerHTML = '<p>ê±°ì˜ ë‹¤ ëì–´ìš”.</p><h1>ì¡°ê¸ˆë§Œ ë” ì•Œì•„ë³¼ê²Œìš”.</h1>';
                eById("HelloText2").innerHTML = '<p>ì¡°ê¸ˆë§Œ ë” ì•Œì•„ë³¼ê²Œìš”.</p><h1>ì–´ë–¤ ê²ƒì„ ë” ì„ í˜¸í•˜ì‹œë‚˜ìš”?</h1>';
                eById("LinkContainer").innerHTML = '<a id="A1" href="./CafeMenu.html?Q=4&A=Q3:A0" class="HelloLink">ğŸ ê³¼ì¼ ë² ì´ìŠ¤</a><a id="A2" href="./CafeMenu.html?Q=4&A=Q3:A5" class="HelloLink">â˜• ì»¤í”¼ ë² ì´ìŠ¤</a><a id="A3" href="./CafeMenu.html?Q=4&A=Q3:A3" class="HelloLink">ìƒê´€ ì—†ì–´ìš”.</a>';
                break;
            case "4":
                eById("HelloText1").innerHTML = '<p>ê·¸ë ‡êµ°ìš”.</p><h1>ë§ˆì§€ë§‰ ì§ˆë¬¸ì…ë‹ˆë‹¤.</h1>';
                eById("HelloText2").innerHTML = '<p>ë§ˆì§€ë§‰ ì§ˆë¬¸ì…ë‹ˆë‹¤.</p><h1>ì„ í˜¸í•˜ëŠ” ìŒë£Œì˜ ì§ˆê°ì„ ì•Œë ¤ì£¼ì„¸ìš”.</h1>';
                eById("LinkContainer").innerHTML = '<a id="A1" href="./CafeMenu.html?Q=5&A=Q4:A0" class="HelloLink">ğŸ’§ ê¹”ë”í•˜ê³  ì‚°ëœ»í•œ ì§ˆê°</a><a id="A2" href="./CafeMenu.html?Q=5&A=Q4:A3" class="HelloLink">ğŸ¥› ë¶€ë“œëŸ½ê³  í¬ë¦¬ë¯¸í•œ ì§ˆê°</a><a id="A2" href="./CafeMenu.html?Q=5&A=Q4:A5" class="HelloLink">ğŸ§Š ì”¹ëŠ” ë§›ì´ ìˆëŠ” ì§ˆê°</a>';
                break;
            case "5":
                let CafeAnswer = decodeURIComponent(getCookie("CafeAnswer"));
                // if caseanswer starts with , remove the first character
                if (CafeAnswer.startsWith(",")) {
                    CafeAnswer = CafeAnswer.substring(1);
                }
                let AnswerList = CafeAnswer.split(',');
                let Q1 = AnswerList[0].split(':')[1]; // ì–´ë–¤ ë§›ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”? (A1: ìƒí¼í•œ ë§›, A2: ë‹¬ì½¤í•œ ë§›, A3: ê³ ì†Œí•œ ë§›)
                let Q2 = AnswerList[1].split(':')[1]; // ì‹œì›í•œ ìŒë£Œ (A1: ì°¨ê°€ìš´ ê±¸ ì›í•´ìš”., A2: ë”°ëœ»í•œ ìŒë£Œë¥¼ ì›í•´ìš”.)
                let Q3 = AnswerList[2].split(':')[1]; // ì„ í˜¸í•˜ëŠ” ë² ì´ìŠ¤ (A1: ê³¼ì¼ ë² ì´ìŠ¤, A2: ì»¤í”¼ ë² ì´ìŠ¤, A3: ìƒê´€ ì—†ì–´ìš”)
                let Q4 = AnswerList[3].split(':')[1]; // ì„ í˜¸í•˜ëŠ” ì§ˆê° (A1: ê¹”ë”í•˜ê³  ì‚°ëœ»í•œ ì§ˆê°, A2: ë¶€ë“œëŸ½ê³  í¬ë¦¬ë¯¸í•œ ì§ˆê°, A3: ì”¹ëŠ” ë§›ì´ ìˆëŠ” ì§ˆê°)
                let score = 0;
                score += parseInt(Q1.replace("A", ""));
                score += parseInt(Q2.replace("A", ""));
                score += parseInt(Q3.replace("A", ""));
                score += parseInt(Q4.replace("A", ""));

                let MenuRcommendation = "ì•„í¬ê°€í† ";
                if (score <= 4) {
                    MenuRcommendation = "ì²­í¬ë„ì—ì´ë“œ";
                } else if (score <= 7) {
                    MenuRcommendation = "ë ˆëª¬ì—ì´ë“œ";
                } else if (score <= 10) {
                    MenuRcommendation = "ì´ˆì½”ë¼ë–¼";
                } else if (score <= 13) {
                    MenuRcommendation = "ìë°”ì¹© í”„ë¼í‘¸ì¹˜ë…¸";
                }
                eById("HelloText1").innerHTML = '<p>ì¢‹ì•„ìš”.</p><h1>ë§ì¶¤ ë©”ë‰´ë¥¼ ì¶”ì²œí•´ ë“œë¦´ê²Œìš”.</h1>';
                eById("HelloText2").innerHTML = `<p>${userName}ë‹˜ì˜ ë§ì¶¤ ë©”ë‰´ëŠ”...</p><h1>${MenuRcommendation} ì…ë‹ˆë‹¤.</h1>`;
                eById("LinkContainer").innerHTML = `<a id="A1" href="./CafeOrder?M=${MenuRcommendation}" class="HelloLink">ì¢‹ì•„ìš”. ì´ê±¸ë¡œ ì£¼ì„¸ìš”.</a><a id="A2" href="./CafeMenu.html?Q=1" class="HelloLink">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</a>`;
                break;
            default:
                break;
        }
        setTimeout(() => {
            document.getElementById('HelloText1').classList.add('visible');
        }, 100);
        setTimeout(() => {
            document.getElementById('HelloText1').classList.add('blur');
            document.getElementById('HelloText1').style.opacity = 0;
        }, 2000);
        setTimeout(() => {
            document.getElementById('HelloText2').classList.add('visible');
        }, 2100);
        setTimeout(() => {
            document.getElementById('LinkContainer').classList.add('visible');
        }, 2100);

    </script>
</body>

</html>