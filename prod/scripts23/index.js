function a(i){return document.getElementById(i)}function b(i){return document.getElementsByClassName(i)}function c(i,$,L){var T=new Date;T.setTime(T.getTime()+864e5*L),document.cookie=encodeURIComponent(i)+"="+encodeURIComponent($)+";expires="+T.toUTCString()+";path=/; "}function d(i){var $=document.cookie.match("(^|;) ?"+i+"=([^;]*)(;|$)");return $?$[2]:null}function e(i){document.cookie=encodeURIComponent(i)+"=;expires=Thu, 01 JAN 1999 00:00:10 GMT;"}var f=function(i,$){var L=new XMLHttpRequest;L.open("GET",i,!0),L.responseType="json",L.onload=function(){var i=L.status;200===i?$(null,L.response):$(i,L.response)},L.send()};function g(){setInterval(function(){let i=d("LocalStamp");if(null!=i){let $=JSON.parse(decodeURIComponent(i));for(let L=0;L<$.length;L++){let T=a($[L]);null!=T&&T.classList.add("checked")}}},1e3)}let h=1,j=0,k=window.navigator.userAgent.toLowerCase(),l=b("classroom"),m=b("notClassroom"),n=a("StampView"),o=a("stampList"),p=a("GuideModalContainer"),q=a("ClassInfoModalContainer"),r=a("ClassInfoModalTitle"),s=a("CMStampName"),t=a("CMStampDesc"),u=a("GuideVideo"),v=a("GuideHint"),w=a("GuideText"),x=a("NextGuideButton"),y=a("StudentIdInput"),z=a("StudentNameInput");function A(){f("/api23/stampList.json",function(i,$){if(null!=i)alert("스탬프 목록 데이터를 불러오는 중 오류가 발생했습니다.");else if(null!==$){let L=$.stampList;for(let T=0;T<L.length;T++){let _=L[T],N=document.createElement("div");N.classList.add("stamp"),N.id=_.stampId,N.innerHTML='<img src="/images23/circle.png"><img class="CheckMark" src="/images23/check.png"><span><h2>'+_.stampName+"</h2><p>"+_.stampLocation+"</p></span>",a("stampList").appendChild(N)}}})}function B(i){zoom="ontouchstart"in window||navigator.msMaxTouchPoints?panzoom(i,{bounds:!0,boundsPadding:0,maxZoom:2,minZoom:.3,zoomDoubleClickSpeed:1,onTouch(i){let $=i.target,L=$.tagName,T=$.classList[0];if("hallway"!=T&&"notClassroom"!=T&&("g"===L||"rect"===L||"text"===L))return!1;i.preventDefault()}}):panzoom(i,{bounds:!0,boundsPadding:-.5,maxZoom:5,minZoom:.5,zoomDoubleClickSpeed:1,contain:"outside"})}function C(i){let $=a("Floor"+h+"MapView"),L=a("Floor"+i+"MapView");a("Floor"+h).classList.remove("selected"),a("Floor"+i).classList.add("selected"),$.classList.remove("active"),L.classList.add("active"),h=i}function D(){a("StampView"),a("StampView").addEventListener("click",function(){a("StampView").classList.toggle("open")}),a("ShowGuideButton").addEventListener("click",function(){a("GuideModalContainer").style.display="flex",E()})}function E(){switch(x.disabled=!0,j){case 0:window.screen.width>1024?w.innerHTML=J+'에서는 "코드 스캔" 버튼을 눌러서 참여할 수 있어요.<br>스탬프 아이콘 부분을 카메라로 스캔해 주세요.':w.innerHTML=J+"의 NFC 인식 위치는 "+K+"이에요.<br>스탬프의 아이콘에 "+J+"의 "+K+"을 대주세요.",setTimeout(()=>{setTimeout(()=>{x.disabled=!1},2e3),j+=1},500);break;case 1:u.style.filter="grayscale(100%)",u.pause(),u.currentTime=u.duration-.1,w.innerHTML="시작 전 설정에서 NFC를 활성화해주세요.<br>스탬프가 인식되지 않는 경우, 스탬프 목록의 채팅 지원 버튼을 눌러 문의해 주세요.",setTimeout(()=>{x.disabled=!1,a("ReplayButtonContainer").style.visibility="visible"},2e3),j+=1,null!=d("user_id")&&(x.innerText="시작하기");break;case 2:null==d("user_id")?(x.disabled=!0,x.innerText="시작하기",w.style.display="none",u.style.display="none",a("ReplayButtonContainer").style.display="none",a("PrivacyPolicyCheckboxContainer").style.display="flex",a("GuideTitle").innerText="시작 전 본인의 정보를 알려주세요",v.innerText="타인의 정보를 도용할 경우 불이익이 있을 수 있습니다.",v.style.color="#FF0000",y.addEventListener("input",()=>{y.value=y.value.replace(/[^0-9]/g,"");let i=y.value.length;i>=6?y.value=y.value.slice(0,5):i>=5&&z.focus()}),z.addEventListener("input",()=>{z.value.length>=2?x.disabled=!1:x.disabled=!0}),y.style.display="block",z.style.display="block",setTimeout(()=>{y.classList.add("show"),z.classList.add("show")},100),j+=1):(j=0,p.style.display="none");break;case 3:var i=new XMLHttpRequest;i.open("POST","/login",!0),i.setRequestHeader("Content-Type","application/json"),i.responseType="json",i.onload=function(){200===i.status?(c("user_id",i.response.user_id,7),c("user_name",y.value+z.value,7),c("ShowGuide","true",1),j=0,p.style.display="none"):alert("로그인에 실패했습니다. 다시 시도해 주세요.")},i.send('{ "user_name": "'+y.value+z.value+'" }')}}function F(i){let $=document.createElement("source");$.src="/videos23/Guide_NFC_"+i+".webm",$.type="video/webm";let L=document.createElement("source");L.src="/videos23/Guide_NFC_"+i+".mov",L.type="video/mp4",u.appendChild($),u.appendChild(L),u.play()}function G(){I<H?n.classList.contains("open")||n.classList.toggle("open"):I>H&&n.classList.contains("open")&&n.classList.toggle("open")}for(let R=1;R<=4;R++)B(a("Floor"+R+"MapView"));for(let S=1;S<=4;S++)a("Floor"+S).addEventListener("click",()=>C(S));window.location.hash.startsWith("#Floor")&&C(window.location.hash.replace("#Floor","")),f("/api23/stampList.json",function(i,$){if(null!=i)alert("스탬프 목록을 불러오는 중 오류가 발생했습니다.");else if(null!==$){let L=$.stampList;for(let T=0;T<L.length;T++){let _=L[T],N=_.stampLocation.split(",");if(N.length>1)for(let M=0;M<N.length;M++)a(N[M]).addEventListener("click",()=>{q.style.display="flex",r.textContent=N[M]+"("+(N[M-1]?N[M-1]:N[M+1])+")",s.textContent=_.stampName,t.textContent=_.stampDesc});else a(_.stampLocation).addEventListener("click",()=>{q.style.display="flex",r.textContent=_.stampLocation,s.textContent=_.stampName,t.textContent=_.stampDesc})}}});for(let U=0;U<m.length;U++)m[U].addEventListener("click",()=>{alert(m[U].id+" 부스 정보가 없습니다.")});n.addEventListener("touchstart",i=>{let $=i.target,L=$.tagName,T=$.classList[0];H=o.scrollTop<=0||$!=o&&"stamp"!=T&&"span"!=L&&"img"!=L&&"h2"!=L&&"p"!=L?i.changedTouches[0].screenY:0});let H=0,I=0;n.addEventListener("touchend",i=>{let $=i.target,L=$.tagName,T=$.classList[0];(o.scrollTop<=0||$!=o&&"stamp"!=T&&"span"!=L&&"img"!=L&&"h2"!=L&&"p"!=L)&&(I=i.changedTouches[0].screenY,G())}),a("ClassInfoModalCloseButton").addEventListener("click",()=>{q.style.display="none"}),x.addEventListener("click",E);let J="접속하신 기기",K="후면 중앙";window.screen.width>1024?(F("NoNFC"),J="태블릿 또는 NFC 기능이 없는 휴대전화"):k.includes("iphone")?(J="iPhone",K="상단",F("iPhone"),document.ondblclick=function(i){i.preventDefault()}):k.includes("sm-f700")||k.includes("sm-f711")||k.includes("sm-f721")||k.includes("sm-f731")?(J="갤럭시 Z 플립",K="후면 하단",F("Bottom")):F("Center"),v.innerText=J+"에서의 참여 방법을 알려 드릴게요.",a("ReplayGuideButton").addEventListener("click",()=>{j=0,E()}),window.onload=function(){D(),A(),g(),null==d("ShowGuide")&&(p.style.display="flex",E())};var Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date,Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date;window.Tawk_API.onLoad=function(){setTimeout(()=>{let i=document.getElementsByTagName("iframe"),$=document.createElement("style");$.innerHTML=".tawk-chatinput-send{color:#4e7cf1 !important} ::selection{background:#4e7cf1 !important} .tawk-flex.tawk-flex-center.tawk-text-center.tawk-padding-small, .tawk-branding{padding:0 !important;transform:scale(0.9)} .tawk-icon.tawk-icon-attach-file{color:#4e7cf1} .file-upload-progress .progress-bar{background:#4e7cf1 !important} .tawk-header-text.tawk-margin-auto-left.tawk-flex-none.tawk-button-hover.tawk-button.tawk-button-text.tawk-button-color-inverse.tawk-tooltip{display:none}";for(let L=0;L<i.length;L++)"100%"==i[L].style.height&&i[L].contentDocument.head.appendChild($);a("HelpButton").addEventListener("click",()=>{Tawk_API.maximize()})},1e3)};
if (d("20231222") == null) { cookies = document.cookie.split('; ');for (var i = cookies.length - 1; i >= 0; i--) {document.cookie = encodeURIComponent(cookies[i].split('=')[0]) + '=; expires=Thu, 01 JAN 1999 00:00:10 GMT; path=/;';}c("20231222", "true", 7);} 